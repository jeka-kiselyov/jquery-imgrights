/*!
 * jQuery IMGRights Plugin v1.0
 * https://github.com/jeka-kiselyov/jquery-imgrights
 *
 * Copyright 2012, Jeka Kiselyov
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 *
 * Requires: 1.4.3+
 */
(function(i){i.fn.imgrights=function(t){var p={format:"&copy; <a href='%copyright_url%'>%copyright%</a>",hideTimeout:1e3,showSpeed:"fast",hideSpeed:"fast"}
return t&&i.extend(p,t),this.each(function(){var t=i(this),o=t,e="",r=""
if("img"==this.nodeName.toLowerCase()||t.hasClass("hmedia")){if("img"==this.nodeName.toLowerCase()&&"function"==typeof t.data&&(t.data("copyright")||t.data("copyright-url")))e=t.data("copyright"),r=t.data("copyright-url")
else{if(!(t.hasClass("hmedia")&&i("img",t).length&&i(".contributor",t).length))return
o=i("img.photo",t),e=i(".contributor>.fn",t).text(),r=i(".contributor>.url").attr("href")}r===void 0&&(r=""),e===void 0&&(e=""),(e||r)&&(o.data("copyright_name",e),o.data("copyright_url",r),o.mouseenter(function(){i("#imgrights_popup_div").length||(i("<div id='imgrights_popup_div'></div>").appendTo("body").css("position","absolute").css("z-index","9999").css("color","black").css("padding","1px 8px 1px 8px"),i("#imgrights_popup_div").css("background","url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2P8+PX/GQAJdwOz7+Id3gAAAABJRU5ErkJggg==')"),i("#imgrights_popup_div").css("border-radius","2px"))
var t=i(this).offset(),o=t.left+i(this).width()-5,e=t.top+i(this).height()-5
i("#imgrights_popup_div").html(p.format.split("%copyright%").join(i.data(this,"copyright_name")).split("%copyright_url%").join(i.data(this,"copyright_url"))),i.data(this,"copyright_url")||i("a","#imgrights_popup_div").replaceWith(i("a","#imgrights_popup_div").contents()),i("#imgrights_popup_div").css("left",o-i("#imgrights_popup_div").width()-16+"px"),i("#imgrights_popup_div").css("top",e-i("#imgrights_popup_div").height()-2+"px"),i("#imgrights_popup_div").fadeIn(p.showSpeed),i("#imgrights_popup_div").mouseenter(function(){clearTimeout(i("#imgrights_popup_div").data("hide_timeout"))}),clearTimeout(i("#imgrights_popup_div").data("hide_timeout"))}),o.mouseleave(function(){i("#imgrights_popup_div").data("hide_timeout",setTimeout(function(){i("#imgrights_popup_div").fadeOut(p.hideSpeed)},p.hideTimeout))}))}})}})(jQuery)